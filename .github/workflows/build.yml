name : build

on :
  push :
    branches : [ "master" ]
  pull_request :
    branches : [ "master" ]

permissions :
  contents : read

jobs :
  build :
    runs-on : ubuntu-latest
    steps :
      - uses : actions/checkout@v3
      - name : Setup
        uses : actions/setup-python@v4
        with :
          python-version : "3.x"
      - name : Install
        run : |
          python -m pip install --upgrade pip
          pip install pytest
      - name : Test
        run : |
          pytest tests.py -s
      - name : Build
        run : |
          python setup.py -noask
          ls
          ls dist
      - name : Upload
        uses : actions/upload-artifact@v3
        with :
          name : langful
          # path : dist/*.whl
          path : dist/langful-0.41-py3-none-any.whl.whl
